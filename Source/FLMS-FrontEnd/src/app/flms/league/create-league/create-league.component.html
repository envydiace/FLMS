<div class="example-loading-shade" *ngIf="loading">
    <mat-spinner  [hidden]="!loading"></mat-spinner>
    <!-- <div class="example-rate-limit-reached" *ngIf="isRateLimitReached">
        GitHub's API rate limit has been reached. It will be reset in one minute.
    </div> -->
</div>
<!-- <mat-spinner [hidden]="!loading"></mat-spinner> -->
<form [formGroup]="createLeagueForm">
    <mat-toolbar class="card">
        <span style="text-transform: uppercase;">Create League</span>
        <div class="create-league-action">
            <button mat-raised-button type="submit" (click)="onSubmit()" type="submit" color="primary">Create</button>
        </div>
    </mat-toolbar>
    <div class="create-league-containner row">
        <div class="col-xl-9">
            <div class="card mb-4">
                <div class="card-body ">
                    <div class="card-header">Basic Infomation</div>
                    <div class="" style="margin: 0 15px;">
                        <label class="create-league-label">Your League Name: </label>
                        <div>
                            <mat-form-field appearance="" class="create-league-input">
                                <mat-label>Enter League Name</mat-label>
                                <input matInput formControlName="leagueName">
                                <mat-error *ngIf="!createLeagueForm.controls['leagueName'].valid">
                                    'leagueName' max length is 100 character
                                </mat-error>
                            </mat-form-field>
                        </div>
                    </div>

                    <div class="" style="margin: 0 15px;">
                        <label class="create-league-label">Location: </label>
                        <div>
                            <mat-form-field appearance="" class="create-league-input">
                                <mat-label>Enter Location</mat-label>
                                <input matInput formControlName="location">
                                <mat-error *ngIf="!createLeagueForm.controls['location'].valid">
                                    'location' max length is 255 character
                                </mat-error>
                            </mat-form-field>
                        </div>
                    </div>

                    <div class="row gx-3 mb-3" style="margin: 0;">
                        <div class="league-input-number col-md-5">
                            <label class="create-league-label">Start date: </label>
                            <div>
                                <mat-form-field appearance="">
                                    <mat-label>Choose a date</mat-label>
                                    <input matInput [matDatepicker]="startDate" formControlName="startDate" disabled>
                                    <mat-datepicker-toggle matSuffix [for]="startDate"></mat-datepicker-toggle>
                                    <mat-datepicker #startDate disabled="false"></mat-datepicker>
                                </mat-form-field>
                            </div>
                        </div>

                        <div class="league-input-number col-md-5">
                            <label class="create-league-label">End date:</label>
                            <div>
                                <mat-form-field appearance="">
                                    <mat-label>Choose a date</mat-label>
                                    <input matInput [matDatepicker]="endDate" formControlName="endDate" disabled>
                                    <mat-datepicker-toggle matSuffix [for]="endDate"></mat-datepicker-toggle>
                                    <mat-datepicker #endDate disabled="false"></mat-datepicker>
                                </mat-form-field>
                            </div>
                        </div>
                    </div>

                    <div class="row gx-3 mb-3" style="margin: 0;">
                        <div class="league-input-number col-md-5">
                            <label class="create-league-label">Number of participating teams: </label>
                            <div>
                                <mat-form-field appearance="">
                                    <mat-label>Ex. 12</mat-label>
                                    <input matInput type="number" formControlName="noParticipate">
                                    <mat-error *ngIf="!createLeagueForm.controls['noParticipate'].valid">
                                        Must be between 2 and 20 players.
                                    </mat-error>
                                </mat-form-field>
                            </div>
                        </div>

                        <div class="league-input-number col-md-5">
                            <label class="create-league-label">Maximum number of players in team: </label>
                            <div>
                                <mat-form-field appearance="">
                                    <mat-label>Ex. 30</mat-label>
                                    <input matInput type="number" formControlName="maxNoPlayer">
                                    <mat-error *ngIf="!createLeagueForm.controls['noParticipate'].valid ">
                                        Must be between 7 and 30 players.
                                    </mat-error>
                                </mat-form-field>
                            </div>
                        </div>
                    </div>

                    <div class="row gx-3 mb-3" style="margin: 0;">
                        <div class="league-input-number col-md-5">
                            <label class="create-league-label">Number of player in squad: </label>
                            <div>
                                <!-- <mat-form-field appearance="">
                                    <mat-label>Ex. 11</mat-label>
                                    <input matInput type="number" formControlName="noPlayerSquad">
                                    <mat-error *ngIf="!createLeagueForm.controls['noParticipate'].valid">
                                        Must be between 5 and 11 players.
                                    </mat-error>
                                </mat-form-field> -->

                                <mat-form-field appearance="" class="create-league-input">
                                    <mat-label>Select Number</mat-label>
                                    <mat-select formControlName="noPlayerSquad">
                                        <mat-option value="7">7</mat-option>
                                        <mat-option value="11">11</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                        </div>
                        <div class="league-input-number col-md-5">
                            <label class="create-league-label">Fanpage: </label>
                            <div>
                                <mat-form-field appearance="" class="create-league-input">
                                    <mat-label>Enter Fanpage</mat-label>
                                    <input matInput formControlName="fanpage">
                                    <mat-error *ngIf="!createLeagueForm.controls['fanpage'].valid">
                                        'fanpage' max length is 255 character
                                    </mat-error>
                                </mat-form-field>
                            </div>
                        </div>
                    </div>

                    <div class="card-header">Format Configuration</div>

                    <div class="row gx-3 mb-3" style="margin: 0;">
                        <div class="league-input-number col-md-5">
                            <label class="create-league-label">Competition format:</label>
                            <div>
                                <mat-form-field appearance="" class="create-league-input">
                                    <mat-label>Select Format</mat-label>
                                    <mat-select formControlName="leagueType">
                                        <mat-option value="LEAGUE">LEAGUE</mat-option>
                                        <mat-option value="KO">KO</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                            <label class="create-league-label">Sponsored:</label>
                            <div>
                                <mat-form-field appearance="">
                                    <mat-label>Ex. 100000</mat-label>
                                    <input matInput type="number" formControlName="sponsored">
                                </mat-form-field>
                            </div>
                        </div>

                        <div class="league-input-number col-md-5">
                            <label class="create-league-label">Description:</label>
                            <div>
                                <mat-form-field appearance="fill" class="create-league-input">
                                    <mat-label>Enter Description</mat-label>
                                    <textarea matInput rows="10" formControlName="description"></textarea>
                                </mat-form-field>
                            </div>
                        </div>
                    </div>

                    <div class="card-header" style="height: 66px;">
                        <span style="line-height: 37px;">Fee Infomation</span>
                        <button mat-raised-button color="warn" (click)="openDialogUpdateFee()"
                            style="float: right;">Update Fee</button>
                    </div>

                    <div *ngFor="let fee of listFee; let i = index">
                        <div class="fee-header">
                            <img src="../../../../assets/image/Blue_circle_frame.png">
                            <div class="fee-title"><span>{{fee.expenseName}}</span></div>
                            <span>{{fee.cost| currency:'VND':''}} đ</span>
                        </div>
                    </div>

                    <div class="fee-total-header">
                        <div class="prize-title"><span>Total Fee</span></div>
                        <span>{{feeCostTotal| currency:'VND':''}} đ</span>
                    </div>
                    <div class="fee-total-header">
                        <div class="prize-title"><span>Registration Fee</span></div>
                        <span>{{registrationFee| currency:'VND':''}} đ</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3">
            <div class="card mb-4 mb-xl-0 league-card">
                <mat-card class="create-league-card">
                    <div class="league-logo">
                        <img mat-card-avatar class="league-header-image border-gradient" [src]="imgSrc"><br>
                        <p>Upload Avatar</p>
                        <input type="file" (change)="showPreview($event)">
                    </div>
                    <div style="text-align: center; margin: 30px 0;">
                        <mat-card-title>{{getControl('leagueName').value != null ? getControl('leagueName').value :
                            'Your League Name'}}</mat-card-title>
                        <mat-card-subtitle>{{user != undefined ? user.fullName : ''}}</mat-card-subtitle>
                    </div>
                    <div class="card-header">Prize Infomation</div>
                    <!-- <div class="card-content">Total Prize - {{prizeCostTotal | currency:'VND':''}} VND</div> -->

                    <mat-card-content>
                        <div class="prize-info-content">
                            <img src="../../../../assets/image/gold-medal.png">
                            <div class="prize-title"><span>Gold Prize</span></div>
                            <span>{{listPrize[0].cost| currency:'VND':''}} đ</span>
                        </div>
                        <div class="prize-info-content">
                            <img src="../../../../assets/image/silver-medal.png">
                            <div class="prize-title"><span>Silver Prize</span></div>
                            <span>{{listPrize[1].cost| currency:'VND':''}} đ</span>
                        </div>
                        <div class="prize-info-content">
                            <img src="../../../../assets/image/silver-medal.png">
                            <div class="prize-title"><span>Bronze Prize</span></div>
                            <span>{{listPrize[2].cost| currency:'VND':''}} đ</span>
                        </div>

                        <div class="card-header">Personal Prize</div>
                        <div *ngFor="let prize of listPrize; let i = index">
                            <div *ngIf="i > 2" class="prize-info-content">
                                <img src="../../../../assets/image/Blue_circle_frame.png">
                                <div class="prize-title"><span>{{listPrize[i].expenseName}}</span></div>
                                <span>{{listPrize[i].cost| currency:'VND':''}} đ</span>
                            </div>
                        </div>
                        <div class="card-header">
                            <div class="prize-title"><span>Total Prize</span></div>
                            <span>{{prizeCostTotal| currency:'VND':''}} đ</span>
                        </div>
                        <div>
                            <!-- Registration Fee: 20000000 VND -->
                        </div>
                    </mat-card-content>
                    <div class="row justify-content-center" style="margin: 0;">
                        <button mat-raised-button color="primary" (click)="openDialogUpdatePrize()">Update
                            Prize</button>
                    </div>

                </mat-card>
            </div>
        </div>
    </div>
</form>